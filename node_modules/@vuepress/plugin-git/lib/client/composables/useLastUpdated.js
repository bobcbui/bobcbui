import { computed, toValue } from 'vue';
import { usePageData, usePageLang } from 'vuepress/client';
import { useGitLocaleConfig } from './useGitLocales.js';
export const useLastUpdated = (enabled = true) => {
    const lang = usePageLang();
    const locale = useGitLocaleConfig();
    const page = usePageData();
    return computed(() => {
        if (!toValue(enabled))
            return null;
        const timeStamp = 
        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition
        page.value.git?.updatedTime ?? page.value.git?.changelog?.[0].time;
        if (!timeStamp)
            return null;
        const date = new Date(timeStamp);
        const text = new Intl.DateTimeFormat(lang.value, {
            dateStyle: 'short',
            timeStyle: 'short',
        }).format(timeStamp);
        return {
            date,
            text,
            iso: date.toISOString(),
            locale: locale.value.latestUpdateAt,
        };
    });
};
